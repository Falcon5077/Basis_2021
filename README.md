# 젤리콥터 (Basis_2021)

| 게임 이름 | 개발기간 | 소속 | 엔진 | 개발인원 | 장르 |
| --- | --- | --- | --- | --- | --- |
| 젤리콥터 | 2021.05~2021.08 | CommIT 동아리 | 유니티 / C# | 4명 | 멀티 협동 퍼즐 |
### 정찬혁 오수진 문주성 박언

이 프로젝트는 2021년 1학기 CommIT 동아리 Basis 팀이 유니티와 Photn Network로 만든 멀티플레이 게임입니다.  

게임의 플레이는 Build 폴더 혹은 Build 브랜치를 참고해주세요.  

---

포톤 네트워크는 서버-클라이언트 아키텍쳐를 가진 프레임워크입니다. 포톤을 이용하여 큰 어려움없이 멀티플레이를 구현할 수 있었습니다.

RPC(원격 프로시저 호출, Remote Procedure Call)를 이용하여 플레이어의 상태, 오브젝트 상호작용, 감정표현, 스테이지 등 대부분을 동기화하였습니다. 

BaaS(Backend as a Service) 서버를 지원하는 다른 서비스도 많지만 포톤 네트워크는 최대 접속자 25명, 한 Room 마다 4인까지 무료입니다.

개발하려는 게임이 실시간 동기화가 필요하며 4인용 게임이므로 적절하다고 생각하여 포톤 네트워크로 결정했습니다.


![image](https://github.com/Falcon5077/Basis_2021/assets/32628758/672237bd-ccb3-4d55-b88e-183921334ba2)

1. 메인에서 포톤네트워크에 연결합니다. 
2. 로비는 방 번호로 방에 입장합니다.
3. 게임안에서는 스테이지를 깨면서 게임이 끝나면 다시 로비로 돌아가는 구조입니다.

## 스테이지 새로고침 기능
![image](https://github.com/Falcon5077/Basis_2021/assets/32628758/e5c4dba4-b3b4-4fe5-8c07-9d335877076f)

위 코드는 스테이지 리셋기능으로, 포톤네트워크를 사용한 부분을 볼 수 있습니다.

1️⃣  ESC 키를 눌렀을 때 로컬 네트워크가 host인지 체크하고 같은 방의 유저들에게 RPC(원격 프로시저 호출)를 날립니다. (리셋 기능은 방장만 가능합니다.)

2️⃣  같은 방의 유저들은 RPC 콜을 받고 스테이지 리셋 함수를 실행합니다.

3️⃣  모든 오브젝트들마다 Reset.cs 컴포넌트를 가지고 있으며 저장된 초기 좌표로 초기화됩니다.


![clear](https://github.com/Falcon5077/Basis_2021/assets/32628758/81b193e4-b77c-4252-a42c-86d9405ddfcd)

contact : royale@kakao.com
